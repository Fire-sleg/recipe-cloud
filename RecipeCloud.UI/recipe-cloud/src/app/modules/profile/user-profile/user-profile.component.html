<div class="profile-container">
  <div class="container">
    <div class="profile-header">
      <h1 class="profile-title">
        <span class="title-icon">üë§</span>
        –ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å
      </h1>
      <p class="profile-subtitle">–ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Å–≤–æ—ó —Ö–∞—Ä—á–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π</p>
    </div>

    <div class="profile-content">
      <!-- Sidebar Navigation -->
      <div class="profile-sidebar">
        <nav class="profile-nav">
          <button 
            class="nav-btn" 
            [class.active]="activeTab === 'preferences'"
            (click)="setActiveTab('preferences')">
            <span class="nav-icon">ü•ó</span>
            <span class="nav-text">–í–ø–æ–¥–æ–±–∞–Ω–Ω—è</span>
          </button>
          
          <button 
            class="nav-btn" 
            [class.active]="activeTab === 'recipes'"
            (click)="setActiveTab('recipes')">
            <span class="nav-icon">üë®‚Äçüç≥</span>
            <span class="nav-text">–°—Ç–≤–æ—Ä–µ–Ω—ñ —Ä–µ—Ü–µ–ø—Ç–∏</span>
          </button>
          
          <button 
            class="nav-btn" 
            [class.active]="activeTab === 'collections'"
            (click)="setActiveTab('collections')">
            <span class="nav-icon">üìö</span>
            <span class="nav-text">–ö–æ–ª–µ–∫—Ü—ñ—ó —Ä–µ—Ü–µ–ø—Ç—ñ–≤</span>
          </button>
        </nav>
      </div>

      <!-- Main Content -->
      <div class="profile-main">
        <!-- Preferences Tab app-preferances-->
        <div *ngIf="activeTab === 'preferences'" class="tab-content">
          <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="profile-form">
            <!-- Diets Section -->
            <div class="form-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="section-icon">ü•ó</span>
                  –î—ñ—î—Ç–∏
                </h2>
                <p class="section-description">–û–±–µ—Ä—ñ—Ç—å –¥—ñ—î—Ç–∏, —è–∫–∏—Ö –≤–∏ –¥–æ—Ç—Ä–∏–º—É—î—Ç–µ—Å—å</p>
              </div>
              
              <div class="options-grid">
                <div *ngFor="let diet of availableDiets; let i = index" class="option-item">
                  <div class="custom-checkbox-wrapper">
                    <input type="checkbox" 
                           [formControl]="$any(diets.controls[i])" 
                           [id]="'diet-' + i" 
                           class="custom-checkbox-input">
                    <label [for]="'diet-' + i" class="custom-checkbox-label diet-label">
                      <span class="checkbox-indicator"></span>
                      <span class="checkbox-text">{{ diet }}</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Allergens Section -->
            <div class="form-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="section-icon">‚ö†Ô∏è</span>
                  –ê–ª–µ—Ä–≥–µ–Ω–∏
                </h2>
                <p class="section-description">–í–∫–∞–∂—ñ—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏, –Ω–∞ —è–∫—ñ —É –≤–∞—Å –∞–ª–µ—Ä–≥—ñ—è</p>
              </div>
              
              <div class="options-grid">
                <div *ngFor="let allergen of availableAllergens; let i = index" class="option-item">
                  <div class="custom-checkbox-wrapper">
                    <input type="checkbox" 
                           [formControl]="$any(allergens.controls[i])" 
                           [id]="'allergen-' + i" 
                           class="custom-checkbox-input">
                    <label [for]="'allergen-' + i" class="custom-checkbox-label allergen-label">
                      <span class="checkbox-indicator"></span>
                      <span class="checkbox-text">{{ allergen }}</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Cuisines Section -->
            <div class="form-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="section-icon">üåç</span>
                  –£–ª—é–±–ª–µ–Ω—ñ –∫—É—Ö–Ω—ñ
                </h2>
                <p class="section-description">–û–±–µ—Ä—ñ—Ç—å –∫—É—Ö–Ω—ñ —Å–≤—ñ—Ç—É, —è–∫—ñ –≤–∞–º –ø–æ–¥–æ–±–∞—é—Ç—å—Å—è</p>
              </div>
              
              <div class="options-grid">
                <div *ngFor="let cuisine of availableCuisines; let i = index" class="option-item">
                  <div class="custom-checkbox-wrapper">
                    <input type="checkbox" 
                           [formControl]="$any(cuisines.controls[i])" 
                           [id]="'cuisine-' + i" 
                           class="custom-checkbox-input">
                    <label [for]="'cuisine-' + i" class="custom-checkbox-label cuisine-label">
                      <span class="checkbox-indicator"></span>
                      <span class="checkbox-text">{{ cuisine }}</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="form-actions">
              <button type="submit" 
                      class="submit-btn"
                      [class.loading]="isSubmitting"
                      [disabled]="profileForm.invalid || isSubmitting">
                <span *ngIf="!isSubmitting" class="btn-content">
                  <span class="btn-icon">üíæ</span>
                  –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏
                </span>
                <span *ngIf="isSubmitting" class="btn-content">
                  <span class="spinner"></span>
                  –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è...
                </span>
              </button>
              
              <button type="button" 
                      class="reset-btn"
                      (click)="resetForm()"
                      [disabled]="isSubmitting">
                <span class="btn-icon">üîÑ</span>
                –°–∫–∏–Ω—É—Ç–∏
              </button>
            </div>
          </form>
        </div>

        <!-- Created Recipes Tab app-recipes-->
        <!-- <div *ngIf="activeTab === 'recipes'" class="tab-content">
          <div class="recipes-section">
            <div class="section-header">
              <h2 class="section-title">
                <span class="section-icon">üë®‚Äçüç≥</span>
                –ú–æ—ó —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ä–µ—Ü–µ–ø—Ç–∏
              </h2>
              <p class="section-description">–†–µ—Ü–µ–ø—Ç–∏, —è–∫—ñ –≤–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ —Ç–∞ –¥–æ–¥–∞–ª–∏ –¥–æ —Å–∏—Å—Ç–µ–º–∏</p>
            </div>
            
            <div class="recipes-grid" *ngIf="userRecipes.length > 0; else noRecipes">
              <div *ngFor="let recipe of userRecipes" class="recipe-card">
                <div class="recipe-image">
                  <img [src]="recipe.imageUrl || '/assets/default-recipe.jpg'" [alt]="recipe.title">
                </div>
                <div class="recipe-info">
                  <h3 class="recipe-name">{{ recipe.title }}</h3>
                  <p class="recipe-description">{{ recipe.description }}</p>
                  <div class="recipe-meta">
                    <span class="recipe-time">‚è±Ô∏è {{ recipe.cookingTime }} —Ö–≤</span>
                    <span class="recipe-difficulty">üìä {{ recipe.difficulty }}</span>
                  </div>
                  <div class="recipe-actions">
                    <button class="action-btn edit" (click)="editRecipe(recipe.id)">
                      <span>‚úèÔ∏è</span> –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
                    </button>
                    <button class="action-btn delete" (click)="deleteRecipe(recipe.id)">
                      <span>üóëÔ∏è</span> –í–∏–¥–∞–ª–∏—Ç–∏
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <ng-template #noRecipes>
              <div class="empty-state">
                <div class="empty-icon">üë®‚Äçüç≥</div>
                <h3>–í–∏ —â–µ –Ω–µ —Å—Ç–≤–æ—Ä–∏–ª–∏ –∂–æ–¥–Ω–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç—É</h3>
                <p>–ü–æ—á–Ω—ñ—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –∫—É–ª—ñ–Ω–∞—Ä–Ω—ñ —à–µ–¥–µ–≤—Ä–∏!</p>
                <button class="create-recipe-btn" (click)="createNewRecipe()">
                  <span>‚ûï</span> –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ä–µ—Ü–µ–ø—Ç
                </button>
              </div>
            </ng-template>
          </div>
        </div> -->
        <div *ngIf="activeTab === 'recipes'" class="tab-content">
          <app-user-recipes></app-user-recipes>
        </div>
        <!-- Recipe Collections Tab app-collections-->
        <div *ngIf="activeTab === 'collections'" class="tab-content">
          <div class="collections-section">
            <div class="section-header">
              <h2 class="section-title">
                <span class="section-icon">üìö</span>
                –ú–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó —Ä–µ—Ü–µ–ø—Ç—ñ–≤
              </h2>
              <p class="section-description">–û—Ä–≥–∞–Ω—ñ–∑—É–π—Ç–µ —É–ª—é–±–ª–µ–Ω—ñ —Ä–µ—Ü–µ–ø—Ç–∏ —É —Ç–µ–º–∞—Ç–∏—á–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó</p>
              
            </div>
            
            <div class="collections-grid" *ngIf="userCollections.length > 0; else noCollections">
              <div *ngFor="let collection of userCollections" class="collection-card">
                <div class="collection-header">
                  <h3 class="collection-name">{{ collection.title }}</h3>
                  <div class="collection-meta">
                    <span class="recipe-count">üìù {{ collection.recipes.length }} —Ä–µ—Ü–µ–ø—Ç—ñ–≤</span>
                    <div class="collection-actions">
                      <button class="action-btn small" (click)="editCollection(collection.id)" title="–†–µ–¥–∞–≥—É–≤–∞—Ç–∏">
                        ‚úèÔ∏è
                      </button>
                      <button class="action-btn small delete" (click)="deleteCollection(collection.id)" title="–í–∏–¥–∞–ª–∏—Ç–∏">
                        üóëÔ∏è
                      </button>
                    </div>
                  </div>
                </div>
                
                <div class="collection-recipes" *ngIf="collection.recipes.length > 0; else emptyCollection">
                  <div *ngFor="let recipe of collection.recipes" class="collection-recipe">
                    <div class="recipe-thumb">
                      <img [src]="recipe.imageUrl || '/assets/default-recipe.jpg'" [alt]="recipe.title">
                    </div>
                    <div class="recipe-details">
                      <h4 class="recipe-title">{{ recipe.title }}</h4>
                      <p class="recipe-time">‚è±Ô∏è {{ recipe.cookingTime }} —Ö–≤</p>
                    </div>
                    <button class="remove-recipe-btn" (click)="removeFromCollection(collection.id, recipe.id)" title="–í–∏–¥–∞–ª–∏—Ç–∏ –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó">
                      ‚ùå
                    </button>
                  </div>
                </div>
                
                <ng-template #emptyCollection>
                  <div class="empty-collection">
                    <p>–ö–æ–ª–µ–∫—Ü—ñ—è –ø–æ—Ä–æ–∂–Ω—è</p>
                    <button class="add-recipe-btn" (click)="addRecipeToCollection(collection.id)">
                      ‚ûï –î–æ–¥–∞—Ç–∏ —Ä–µ—Ü–µ–ø—Ç
                    </button>
                  </div>
                </ng-template>
                
                <div class="collection-footer" *ngIf="collection.recipes.length > 0">
                  <button class="add-recipe-btn" (click)="addRecipeToCollection(collection.id)">
                    ‚ûï –î–æ–¥–∞—Ç–∏ —Ä–µ—Ü–µ–ø—Ç
                  </button>
                </div>
              </div>
            </div>
            
            <ng-template #noCollections>
              <div class="empty-state">
                <div class="empty-icon">üìö</div>
                <h3>–£ –≤–∞—Å –Ω–µ–º–∞—î –∫–æ–ª–µ–∫—Ü—ñ–π —Ä–µ—Ü–µ–ø—Ç—ñ–≤</h3>
                <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–≤–æ—é –ø–µ—Ä—à—É –∫–æ–ª–µ–∫—Ü—ñ—é –¥–ª—è –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó —É–ª—é–±–ª–µ–Ω–∏—Ö —Ä–µ—Ü–µ–ø—Ç—ñ–≤</p>
                <button class="create-collection-btn" (click)="createNewCollection()">
                  <span>‚ûï</span> –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–ª–µ–∫—Ü—ñ—é
                </button>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>