<div class="profile-container">
  <div class="container">
    <div class="profile-header">
      <h1 class="profile-title">
        <span class="title-icon">üë§</span>
        –ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å
      </h1>
      <p class="profile-subtitle">
        –ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Å–≤–æ—ó —Ö–∞—Ä—á–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
      </p>
    </div>

    <div class="profile-content">
      <!-- Sidebar Navigation -->
      <div class="profile-sidebar">
        <nav class="profile-nav">
          <button
            class="nav-btn"
            [class.active]="activeTab === 'preferences'"
            (click)="setActiveTab('preferences')"
          >
            <span class="nav-icon">ü•ó</span>
            <span class="nav-text">–í–ø–æ–¥–æ–±–∞–Ω–Ω—è</span>
          </button>

          <button
            class="nav-btn"
            [class.active]="activeTab === 'recipes'"
            (click)="setActiveTab('recipes')"
          >
            <span class="nav-icon">üë®‚Äçüç≥</span>
            <span class="nav-text">–°—Ç–≤–æ—Ä–µ–Ω—ñ —Ä–µ—Ü–µ–ø—Ç–∏</span>
          </button>

          <button
            class="nav-btn"
            [class.active]="activeTab === 'collections'"
            (click)="setActiveTab('collections')"
          >
            <span class="nav-icon">üìö</span>
            <span class="nav-text">–ö–æ–ª–µ–∫—Ü—ñ—ó —Ä–µ—Ü–µ–ø—Ç—ñ–≤</span>
          </button>
        </nav>
      </div>

      <!-- Main Content -->
      <div class="profile-main">
        <!-- Preferences Tab app-preferances-->
        <div *ngIf="activeTab === 'preferences'" class="tab-content">
          <form
            [formGroup]="profileForm"
            (ngSubmit)="onSubmit()"
            class="profile-form"
          >
            <!-- Diets Section -->
            <div class="form-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="section-icon">ü•ó</span>
                  –î—ñ—î—Ç–∏
                </h2>
                <p class="section-description">
                  –û–±–µ—Ä—ñ—Ç—å –¥—ñ—î—Ç–∏, —è–∫–∏—Ö –≤–∏ –¥–æ—Ç—Ä–∏–º—É—î—Ç–µ—Å—å
                </p>
              </div>

              <div class="options-grid">
                <div
                  *ngFor="let diet of availableDiets; let i = index"
                  class="option-item"
                >
                  <div class="custom-checkbox-wrapper">
                    <input
                      type="checkbox"
                      [formControl]="$any(diets.controls[i])"
                      [id]="'diet-' + i"
                      class="custom-checkbox-input"
                    />
                    <label
                      [for]="'diet-' + i"
                      class="custom-checkbox-label diet-label"
                    >
                      <span class="checkbox-indicator"></span>
                      <span class="checkbox-text">{{ diet }}</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Allergens Section -->
            <div class="form-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="section-icon">‚ö†Ô∏è</span>
                  –ê–ª–µ—Ä–≥–µ–Ω–∏
                </h2>
                <p class="section-description">
                  –í–∫–∞–∂—ñ—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏, –Ω–∞ —è–∫—ñ —É –≤–∞—Å –∞–ª–µ—Ä–≥—ñ—è
                </p>
              </div>

              <div class="options-grid">
                <div
                  *ngFor="let allergen of availableAllergens; let i = index"
                  class="option-item"
                >
                  <div class="custom-checkbox-wrapper">
                    <input
                      type="checkbox"
                      [formControl]="$any(allergens.controls[i])"
                      [id]="'allergen-' + i"
                      class="custom-checkbox-input"
                    />
                    <label
                      [for]="'allergen-' + i"
                      class="custom-checkbox-label allergen-label"
                    >
                      <span class="checkbox-indicator"></span>
                      <span class="checkbox-text">{{ allergen }}</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Cuisines Section -->
            <div class="form-section">
              <div class="section-header">
                <h2 class="section-title">
                  <span class="section-icon">üåç</span>
                  –£–ª—é–±–ª–µ–Ω—ñ –∫—É—Ö–Ω—ñ
                </h2>
                <p class="section-description">
                  –û–±–µ—Ä—ñ—Ç—å –∫—É—Ö–Ω—ñ —Å–≤—ñ—Ç—É, —è–∫—ñ –≤–∞–º –ø–æ–¥–æ–±–∞—é—Ç—å—Å—è
                </p>
              </div>

              <div class="options-grid">
                <div
                  *ngFor="let cuisine of availableCuisines; let i = index"
                  class="option-item"
                >
                  <div class="custom-checkbox-wrapper">
                    <input
                      type="checkbox"
                      [formControl]="$any(cuisines.controls[i])"
                      [id]="'cuisine-' + i"
                      class="custom-checkbox-input"
                    />
                    <label
                      [for]="'cuisine-' + i"
                      class="custom-checkbox-label cuisine-label"
                    >
                      <span class="checkbox-indicator"></span>
                      <span class="checkbox-text">{{ cuisine }}</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="form-actions">
              <button
                type="submit"
                class="submit-btn"
                [class.loading]="isSubmitting"
                [disabled]="profileForm.invalid || isSubmitting"
              >
                <span *ngIf="!isSubmitting" class="btn-content">
                  <span class="btn-icon">üíæ</span>
                  –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏
                </span>
                <span *ngIf="isSubmitting" class="btn-content">
                  <span class="spinner"></span>
                  –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è...
                </span>
              </button>

              <button
                type="button"
                class="reset-btn"
                (click)="resetForm()"
                [disabled]="isSubmitting"
              >
                <span class="btn-icon">üîÑ</span>
                –°–∫–∏–Ω—É—Ç–∏
              </button>
            </div>
          </form>
        </div>


        <div *ngIf="activeTab === 'recipes'" class="tab-content">
          <app-user-recipes></app-user-recipes>
        </div>

        <div *ngIf="activeTab === 'collections'" class="tab-content">
          <app-user-collections></app-user-collections>
        </div>
      </div>
    </div>
  </div>
</div>
