
<div class="recipe-detail-container" *ngIf="recipe">
  <!-- Header Section -->
  <div class="recipe-header">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-8">
          <div class="recipe-title-section">
            <app-breadcrumb [recipe]="recipe"></app-breadcrumb>
            <h1 class="recipe-title">{{ recipe?.title }}</h1>
            <p class="recipe-description">{{ recipe?.description }}</p>
            
            <!-- Meta Information -->
            <div class="recipe-meta">
              <div class="meta-item">
                <span class="meta-icon">üëÅÔ∏è</span>
                <span class="meta-text">{{ recipe?.viewCount }} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</span>
              </div>
              <div class="meta-item" *ngIf="recipe.averageRating > 0">
                <span class="meta-icon">‚≠ê</span>
                <span class="meta-text">{{ recipe?.averageRating | number:'1.1-1' }} –∑—ñ—Ä–æ–∫ </span>
              </div>
              <div class="meta-item" *ngIf="recipe?.isUserCreated">
                <span class="meta-icon">üë§</span>
                <span class="meta-text">–°—Ç–≤–æ—Ä–µ–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º</span>
              </div>
            </div>

            <!-- Edit Button -->
            <!-- <div class="recipe-actions" *ngIf="canEditRecipe()">
              <button class="btn-edit-recipe" (click)="onEditRecipe()">
                <span class="edit-icon">‚úèÔ∏è</span>
                  –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ä–µ—Ü–µ–ø—Ç
              </button>
              <button class="btn-delete-recipe" (click)="onDeleteRecipe()">
                <span class="delete-icon">üóëÔ∏è</span>
                  –í–∏–¥–∞–ª–∏—Ç–∏ —Ä–µ—Ü–µ–ø—Ç
              </button>
            </div> -->
            <!-- Recipe Actions Section -->
            <div class="recipe-actions" *ngIf="isAuthenticated">
              <!-- Add to Collection Button -->
              <button class="btn-add-collection" (click)="onAddToCollection()">
                <span class="collection-icon">üìö</span>
                –î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ–ª–µ–∫—Ü—ñ—ó
              </button>

              <!-- Edit/Delete Buttons (only if user can edit) -->
              <ng-container *ngIf="canEditRecipe()">
                <button class="btn-edit-recipe" (click)="onEditRecipe()">
                  <span class="edit-icon">‚úèÔ∏è</span>
                  –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ä–µ—Ü–µ–ø—Ç
                </button>
                <button class="btn-delete-recipe" (click)="onDeleteRecipe()">
                  <span class="delete-icon">üóëÔ∏è</span>
                  –í–∏–¥–∞–ª–∏—Ç–∏ —Ä–µ—Ü–µ–ø—Ç
                </button>
              </ng-container>
            </div>

            <!-- Rating Section -->
            <div class="rating-section">
              <div class="rating-stars">
                <span 
                  *ngFor="let star of ratings" 
                  class="star"
                  [class]="getStarClass(star)"
                  (click)="onStarClick(star)"
                  (mouseenter)="onStarHover(star)"
                  (mouseleave)="onStarLeave()">
                  ‚òÖ
                </span>
              </div>
              <p class="rating-text">{{ getRatingText() }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="recipe-image-wrapper">
            <img [src]="recipe?.imageUrl" 
                 [alt]="recipe?.title" 
                 class="recipe-main-image"
                 (error)="onImageError($event)">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="recipe-content">
    <div class="container">
      <div class="row">
        <!-- Left Column - Recipe Info -->
        <div class="col-lg-8">
          <!-- Quick Info Cards -->
          <div class="quick-info-section">
            <div class="row">
              <div class="col-sm-6 col-lg-3">
                <div class="info-card">
                  <div class="info-icon">‚è±Ô∏è</div>
                  <div class="info-content">
                    <div class="info-value">{{ recipe?.cookingTime }}</div>
                    <div class="info-label">—Ö–≤–∏–ª–∏–Ω</div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-lg-3">
                <div class="info-card">
                  <div class="info-icon">üçΩÔ∏è</div>
                  <div class="info-content">
                    <div class="info-value">{{ recipe?.serving }}</div>
                    <div class="info-label">–ø–æ—Ä—Ü—ñ–π</div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-lg-3">
                <div class="info-card">
                  <div class="info-icon">üìä</div>
                  <div class="info-content">
                    <div class="info-value">{{ recipe?.difficulty }}</div>
                    <div class="info-label">—Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å</div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-lg-3">
                <div class="info-card">
                  <div class="info-icon">üî•</div>
                  <div class="info-content">
                    <div class="info-value">{{ recipe?.calories }}</div>
                    <div class="info-label">–∫–∞–ª–æ—Ä—ñ–π</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Ingredients Section -->
          <div class="recipe-section">
            <h2 class="section-title">
              <span class="section-icon">ü•ó</span>
              –Ü–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏
            </h2>
            <div class="ingredients-list">
              <div class="ingredient-item" *ngFor="let ingredient of recipe?.ingredients; let i = index">
                <div class="ingredient-checkbox">
                  <input type="checkbox" [id]="'ingredient-' + i" class="checkbox-input">
                  <label [for]="'ingredient-' + i" class="ingredient-label">
                    {{ ingredient }}
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Directions Section -->
          <div class="recipe-section">
            <h2 class="section-title">
              <span class="section-icon">üë©‚Äçüç≥</span>
              –ü—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—è
            </h2>
            <div class="directions-list">
              <div class="direction-item" *ngFor="let direction of recipe?.directions; let i = index">
                <div class="direction-number">{{ i + 1 }}</div>
                <div class="direction-content">
                  <p>{{ direction }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column - Additional Info -->
        <div class="col-lg-4">
          <!-- Rating Statistics -->
          <!-- <div class="info-sidebar-section" *ngIf="recipe.averageRating > 0">
            <h3 class="sidebar-title">–û—Ü—ñ–Ω–∫–∏</h3>
            <div class="rating-stats">
              <div class="average-rating">
                <span class="rating-number">{{ recipe?.averageRating | number:'1.1-1' }}</span>
                <div class="rating-stars-display">
                  <span 
                    *ngFor="let star of [1,2,3,4,5]" 
                    class="star-display"
                    [class.filled]="star <= (recipe?.averageRating || 0)">
                    ‚òÖ
                  </span>
                </div>
                <span class="rating-count">{{ recipe?.averageRating }} –æ—Ü—ñ–Ω–æ–∫</span>
              </div>
            </div>
          </div> -->

          <!-- Nutrition Facts -->
          <div class="info-sidebar-section">
            <h3 class="sidebar-title">–•–∞—Ä—á–æ–≤–∞ —Ü—ñ–Ω–Ω—ñ—Å—Ç—å (–Ω–∞ –ø–æ—Ä—Ü—ñ—é)</h3>
            <div class="nutrition-grid">
              <div class="nutrition-item">
                <div class="nutrition-label">–ö–∞–ª–æ—Ä—ñ—ó</div>
                <div class="nutrition-value">{{ recipe?.calories }}</div>
              </div>
              <div class="nutrition-item">
                <div class="nutrition-label">–ë—ñ–ª–∫–∏</div>
                <div class="nutrition-value">{{ recipe?.protein | number:'1.1-1' }}–≥</div>
              </div>
              <div class="nutrition-item">
                <div class="nutrition-label">–ñ–∏—Ä–∏</div>
                <div class="nutrition-value">{{ recipe?.fat | number:'1.1-1' }}–≥</div>
              </div>
              <div class="nutrition-item">
                <div class="nutrition-label">–í—É–≥–ª–µ–≤–æ–¥–∏</div>
                <div class="nutrition-value">{{ recipe?.carbohydrates | number:'1.1-1' }}–≥</div>
              </div>
            </div>
          </div>

          <!-- Cuisine & Diet Info -->
          <div class="info-sidebar-section" *ngIf="recipe.cuisine">
            <h3 class="sidebar-title">–ö—É—Ö–Ω—è</h3>
            <div class="cuisine-badge">
              {{ recipe?.cuisine }}
            </div>
          </div>

          <!-- Diets -->
          <div class="info-sidebar-section" *ngIf="recipe.diets && recipe.diets.length">
            <h3 class="sidebar-title">–î—ñ—î—Ç–∏</h3>
            <div class="tags-container">
              <span class="tag diet-tag" *ngFor="let diet of recipe.diets">
                {{ diet }}
              </span>
            </div>
          </div>

          <!-- Allergens -->
          <div class="info-sidebar-section" *ngIf="recipe.allergens && recipe.allergens.length">
            <h3 class="sidebar-title">–ê–ª–µ—Ä–≥–µ–Ω–∏</h3>
            <div class="tags-container">
              <span class="tag allergen-tag" *ngFor="let allergen of recipe.allergens">
                ‚ö†Ô∏è {{ allergen }}
              </span>
            </div>
          </div>

          <!-- Tags -->
          <div class="info-sidebar-section" *ngIf="recipe.tags && recipe.tags.length">
            <h3 class="sidebar-title">–¢–µ–≥–∏</h3>
            <div class="tags-container">
              <span class="tag regular-tag" *ngFor="let tag of recipe.tags">
                {{ tag }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="loading-state" *ngIf="!recipe">
  <div class="loading-content">
    <div class="spinner"></div>
    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Ü–µ–ø—Ç—É...</p>
  </div>
</div>